<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생산일지 시스템 - 로컬 접속 안내</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="max-w-2xl mx-auto p-8">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-4">🏭 생산일지 시스템</h1>
                <p class="text-gray-600">로컬 서버 접속 안내</p>
            </div>

            <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-sm font-medium text-red-800">접속 불가 안내</h3>
                        <div class="mt-2 text-sm text-red-700">
                            <p><strong>bonohouse.p-e.kr</strong> 도메인에서는 로컬 서버에 접속할 수 없습니다.</p>
                            <p>로컬 네트워크에서만 접속 가능합니다.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <h2 class="text-xl font-semibold text-gray-800">올바른 접속 방법:</h2>
                
                <div class="bg-blue-50 rounded-lg p-4">
                    <h3 class="font-semibold text-blue-800 mb-2">1. 로컬 접속 (권장)</h3>
                    <div class="space-y-2">
                        <a href="http://localhost:5173" class="block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-center transition-colors">
                            🏠 메인 대시보드 (localhost:5173)
                        </a>
                        <a href="http://localhost:5173/production-log.html" class="block bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 text-center transition-colors">
                            📋 생산일지 페이지 (localhost:5173/production-log.html)
                        </a>
                    </div>
                </div>

                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-2">2. 대체 접속 방법</h3>
                    <div class="space-y-2">
                        <a href="http://127.0.0.1:5173" class="block bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 text-center transition-colors">
                            🌐 메인 대시보드 (127.0.0.1:5173)
                        </a>
                        <a href="http://127.0.0.1:5173/production-log.html" class="block bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 text-center transition-colors">
                            📋 생산일지 페이지 (127.0.0.1:5173/production-log.html)
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-8 p-4 bg-green-50 rounded-lg">
                <h3 class="font-semibold text-green-800 mb-2">✅ 시스템 상태</h3>
                <div class="text-sm text-green-700 space-y-1">
                    <p>• 서버: 정상 실행 중 (포트 5173)</p>
                    <p>• 생산일지 데이터: 468개 레코드 (14개 날짜)</p>
                    <p>• 실시간 동기화: 활성화</p>
                    <p>• 모든 API: 정상 작동</p>
                </div>
            </div>

            <div class="mt-6 text-center">
                <button onclick="checkConnection()" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-colors">
                    🔍 연결 상태 확인
                </button>
            </div>

            <div id="connection-status" class="mt-4 hidden"></div>
        </div>
    </div>

    <script>
        async function checkConnection() {
            const statusDiv = document.getElementById('connection-status');
            statusDiv.classList.remove('hidden');
            statusDiv.innerHTML = `
                <div class="bg-blue-50 p-4 rounded-lg">
                    <p class="text-blue-800">연결 상태를 확인 중...</p>
                </div>
            `;

            try {
                const baseUrl = window.location.protocol + '//' + window.location.host;
                const apiUrl = baseUrl + '/api/production-log';
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.success) {
                    statusDiv.innerHTML = `
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">✅ 연결 성공!</h4>
                            <div class="text-sm text-green-700">
                                <p>• API 응답: 정상</p>
                                <p>• 데이터 수: ${data.data?.length || 0}개</p>
                                <p>• 최신 날짜: ${data.latestDate || 'N/A'}</p>
                                <p>• 총 레코드: ${data.totalRecords || 0}개</p>
                            </div>
                        </div>
                    `;
                } else {
                    throw new Error('API 응답 오류');
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-800 mb-2">❌ 연결 실패</h4>
                        <p class="text-sm text-red-700">${error.message}</p>
                        <p class="text-sm text-red-600 mt-2">위의 localhost 링크를 클릭해주세요.</p>
                    </div>
                `;
            }
        }

        // 페이지 로드 시 자동 연결 확인
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkConnection, 1000);
        });
    </script>
</body>
</html>